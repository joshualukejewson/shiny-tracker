{% extends "base.html" %}
{% block body %}

<div class="page">
  <img
    class="logo"
    id="pokemon-logo"
    src="../static/assets/poketracker.png"
    alt="pokemon logo"
  />

  {% if username %}
    <h1>Welcome {{ username.capitalize() }}!</h1>
  {% endif %}

  <div class="card">
    <h1>Search for a Pokémon:</h1>

    <!-- SEARCH (Flask-handled) -->
    <form method="POST">
      <input
        type="text"
        name="pokemon_search"
        placeholder="Enter Pokémon name"
        required
      />
      <button type="submit" name="search_btn">Search</button>
    </form>

    {% if pokemon %}
      <div id="pokemon-card" data-pokemon-name="{{ pokemon.name }}">
        <h2>{{ pokemon.name.capitalize() }}</h2>

        <img
          id="pokemon-sprite"
          src="{{ pokemon.sprite }}"
          alt="{{ pokemon.name }}"
          data-normal="{{ pokemon.sprite }}"
          data-shiny="{{ pokemon.sprite_shiny }}"
          onclick="toggleShiny(this)"
          style="cursor: pointer"
        />

        <p>
          Encounters:
          <span id="encounterCount">{{ hunt.encounters }}</span>
        </p>

        <!-- JS-handled buttons -->
        <button id="incrementButton" type="button">+1 Encounter</button>
        <button id="resetButton" type="button">Reset</button>

        <button id="showDialog">Settings</button>

        <dialog id="settingsDialog">
          <h2>Settings</h2>

          <div class="settings">
            <img class="setting-sprite" src="{{ pokemon.sprite }}" />

            <div class="settings-options">
              <label>
                <p>Shiny charm</p>
                <input type="checkbox" />
              </label>

              <label>
                <p>Masuda Method</p>
                <input type="checkbox" />
              </label>
            </div>
          </div>

          <button id="closeDialog">Close</button>
        </dialog>
      </div>
    {% endif %}
  </div>
</div>

{% endblock %}